# Project Files Guide - Ball Sort Puzzle React Native

This guide explains every important file in your React Native project, what it does, and why it's needed.

---

## ğŸ“ Root Directory Files

### Configuration Files

#### `package.json` - The Heart of Your Project

**Purpose:** Defines your project metadata, dependencies, and scripts.

**What's Inside:**
```json
{
  "name": "ballsortpuzzlern",
  "version": "1.0.0",
  "scripts": {
    "android": "react-native run-android",
    "ios": "react-native run-ios",
    "start": "react-native start",
    "test": "jest"
  },
  "dependencies": {
    "react": "18.2.0",
    "react-native": "0.73.2",
    "@react-native-google-signin/google-signin": "...",
    // ... all your packages
  },
  "devDependencies": {
    // ... development tools
  }
}
```

**Key Sections:**
- **name:** Project identifier
- **version:** Current version (for Play Store updates)
- **scripts:** Commands you can run (`npm run android`, etc.)
- **dependencies:** Runtime packages (included in APK)
- **devDependencies:** Development tools (not included in APK)

**When to Edit:**
- Adding new npm packages: `npm install package-name`
- Updating versions: `npm update`
- Adding custom scripts

---

#### `package-lock.json` - Dependency Lock File

**Purpose:** Locks exact versions of all dependencies and sub-dependencies.

**Why Important:**
- Ensures everyone installs same versions
- Prevents "works on my machine" issues
- Tracks dependency tree

**DO NOT edit manually!** Auto-generated by npm.

**When it Changes:**
- When you run `npm install`
- When you add/remove packages
- When you update packages

---

#### `app.json` - React Native Configuration

**Purpose:** Basic React Native app configuration.

**What's Inside:**
```json
{
  "name": "BallSortPuzzle",
  "displayName": "Ball Sort Puzzle"
}
```

**Fields:**
- **name:** App name (used internally, no spaces)
- **displayName:** App name shown to users

**Note:** Most configuration is in `android/` and `ios/` folders for native apps.

---

#### `babel.config.js` - JavaScript Transpiler Configuration

**Purpose:** Configures Babel to transform modern JavaScript to compatible code.

**What's Inside:**
```javascript
module.exports = {
  presets: ['module:metro-react-native-babel-preset'],
  plugins: [
    // Optional plugins for features like decorators, etc.
  ]
};
```

**What Babel Does:**
- Converts JSX â†’ JavaScript
- Transforms ES6+ â†’ ES5 (for older devices)
- Enables experimental features
- Handles React Native specific transformations

**When to Edit:**
- Adding Babel plugins (e.g., for styled-components)
- Enabling experimental JavaScript features
- Customizing transformations

---

#### `metro.config.js` - Metro Bundler Configuration

**Purpose:** Configures Metro (React Native's JavaScript bundler).

**What's Inside:**
```javascript
const {getDefaultConfig, mergeConfig} = require('@react-native/metro-config');

const config = {
  transformer: {
    // Custom transformers
  },
  resolver: {
    // Custom file resolution
  },
};

module.exports = mergeConfig(getDefaultConfig(__dirname), config);
```

**What Metro Does:**
- Bundles JavaScript files
- Transforms code (using Babel)
- Resolves `import` statements
- Watches files for changes (Fast Refresh)
- Creates `index.android.bundle`

**When to Edit:**
- Adding custom asset types
- Configuring file extensions
- Adding module aliases

---

#### `.gitignore` - Git Ignore Rules

**Purpose:** Tells Git which files/folders to ignore (not track).

**Important Entries:**
```
node_modules/          # JavaScript packages (huge, regenerated)
android/app/build/     # Android build output
android/build/         # Gradle build cache
.gradle/               # Gradle cache
*.apk                  # APK files (large)
*.aab                  # Android App Bundle
.env                   # Environment secrets
```

**Why Important:**
- Prevents committing huge folders (node_modules ~500 MB)
- Keeps secrets out of Git (API keys, passwords)
- Avoids conflicts (build outputs differ per machine)

---

#### `.eslintrc.js` - Code Linting Rules

**Purpose:** Configures ESLint to check code quality and style.

**What's Inside:**
```javascript
module.exports = {
  root: true,
  extends: '@react-native',
  rules: {
    // Custom linting rules
    'semi': ['error', 'always'],
    'quotes': ['error', 'single'],
  }
};
```

**What ESLint Does:**
- Finds bugs and potential errors
- Enforces code style consistency
- Shows warnings in VS Code
- Can auto-fix issues

---

### Entry Point Files

#### `index.js` - Main Entry Point

**Purpose:** The first JavaScript file that runs when app starts.

**What's Inside:**
```javascript
import {AppRegistry} from 'react-native';
import App from './App';
import {name as appName} from './app.json';

AppRegistry.registerComponent(appName, () => App);
```

**Flow:**
```
Android launches app
    â†“
Loads index.js
    â†“
Registers 'BallSortPuzzle' component
    â†“
Runs App.js
    â†“
Your app UI renders
```

**DO NOT rename this file!** Android expects `index.js`.

---

#### `index.web.js` - Web Entry Point

**Purpose:** Entry point for web version (react-native-web).

**What's Inside:**
Similar to `index.js` but for browser environment.

**Used when:**
- Building web version: `npm run web`
- Testing in browser
- Deploying to web hosting

---

#### `App.js` - Main App Component

**Purpose:** Root component of your app, sets up navigation and global providers.

**Typical Structure:**
```javascript
import React from 'react';
import {NavigationContainer} from '@react-navigation/native';
import {MenuScreen} from './src/screens/MenuScreen';

function App() {
  return (
    <NavigationContainer>
      {/* Your app screens and navigation */}
      <MenuScreen />
    </NavigationContainer>
  );
}

export default App;
```

**What It Does:**
- Sets up React Navigation
- Wraps app in providers (Redux, Context, etc.)
- Defines initial screen
- Handles app-level state

**This is YOUR main code file!**

---

## ğŸ“ src/ Directory - Your App Code

### `src/screens/` - UI Screens

Each screen is a full-screen view in your app.

**Files:**
- `MenuScreen.js` - Main menu
- `GameScreen.js` - Game play area
- `LevelSelectScreen.js` - Level selection
- `SettingsScreen.js` - Settings
- `AchievementsScreen.js` - Achievements
- `LeaderboardScreen.js` - Leaderboard
- `StatisticsScreen.js` - Player stats

**Example Structure:**
```javascript
// GameScreen.js
import React, {useState} from 'react';
import {View, Text, StyleSheet} from 'react-native';
import GameBoard from '../components/GameBoard';

const GameScreen = ({route, navigation}) => {
  const [score, setScore] = useState(0);
  
  return (
    <View style={styles.container}>
      <Text>Score: {score}</Text>
      <GameBoard />
    </View>
  );
};

export default GameScreen;
```

---

### `src/components/` - Reusable UI Components

**Files:**
- `Ball.js` - Individual ball component
- `Tube.js` - Tube/container for balls
- `GameBoard.js` - Game board layout
- `ParticleSystem.js` - Visual effects
- `BannerAdComponent.js` - AdMob banner ad
- `RewardedAdModal.js` - Rewarded video ad

**Why Separate Components:**
- **Reusability:** Use `Ball` in multiple screens
- **Maintainability:** Easy to find and update
- **Testing:** Test components individually
- **Performance:** Can optimize specific components

**Example:**
```javascript
// Ball.js
import React from 'react';
import {View, StyleSheet} from 'react-native';

const Ball = ({color, size}) => (
  <View style={[styles.ball, {backgroundColor: color, width: size, height: size}]} />
);

export default Ball;
```

---

### `src/services/` - Business Logic & APIs

**Files:**
- `AdMobManager.js` - AdMob integration (ads)
- `AdMobManager.web.js` - Web version (no ads)
- `AudioManager.js` - Sound effects and music
- `AudioManager.web.js` - Web audio
- `GooglePlayGamesManager.js` - Play Games integration
- `GooglePlayGamesManager.web.js` - Web version
- `ProgressManager.js` - Save/load game progress

**Why Services:**
- Separates business logic from UI
- Reusable across screens
- Easier to test
- Platform-specific implementations (.web.js)

**Example:**
```javascript
// AdMobManager.js
class AdMobManager {
  static showBannerAd() {
    // AdMob SDK code
  }
  
  static showRewardedAd(callback) {
    // Show video ad, call callback on complete
  }
}

export default AdMobManager;
```

**Platform Files:**
- `AdMobManager.js` - Used on iOS/Android
- `AdMobManager.web.js` - Used in browser

React Native automatically picks the right file based on platform!

---

### `src/utils/` - Utility Functions & Helpers

**Files:**
- `GameEngine.js` - Game logic (move validation, win conditions)
- `BallExpressionSystem.js` - Ball animations/expressions

**Purpose:**
- Pure functions (no side effects)
- Game algorithms
- Helper utilities
- Constants and configuration

**Example:**
```javascript
// GameEngine.js
export const validateMove = (fromTube, toTube) => {
  // Game logic: can ball move from tube A to tube B?
  if (toTube.isEmpty()) return true;
  if (toTube.topBall().color === fromTube.topBall().color) return true;
  return false;
};

export const checkWinCondition = (tubes) => {
  // Check if all tubes are sorted by color
  return tubes.every(tube => tube.isSorted());
};
```

---

### `src/assets/` - Static Assets

**Folders:**
- `audio/` - Sound effects, background music (MP3, WAV files)

**Why in src:**
- Bundled with JavaScript
- Accessed via `require('./assets/audio/click.mp3')`
- Metro bundler handles them

**Usage:**
```javascript
import Sound from 'react-native-sound';

const clickSound = new Sound(require('./assets/audio/click.mp3'));
clickSound.play();
```

---

## ğŸ“ android/ Directory - Native Android Code

### `android/build.gradle` - Project-level Build Configuration

**Purpose:** Configures build settings for entire Android project.

**Key Sections:**

```gradle
buildscript {
    ext {
        kotlinVersion = "1.8.10"      // Kotlin version
        compileSdkVersion = 34         // Android SDK version
        minSdkVersion = 21             // Minimum Android version
        targetSdkVersion = 34          // Target Android version
    }
    
    repositories {
        google()                       // Google's Maven repo
        mavenCentral()                 // Maven Central
    }
    
    dependencies {
        classpath("com.android.tools.build:gradle:8.1.4")  // Android Gradle Plugin
        classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion")
    }
}
```

**What This Controls:**
- Android SDK versions (which Android versions your app supports)
- Gradle plugin versions
- Kotlin version
- Global repositories (where to download dependencies)
- Build tools version

**When to Edit:**
- Updating Android SDK
- Adding new Gradle plugins
- Changing minimum Android version

---

### `android/app/build.gradle` - App-level Build Configuration

**Purpose:** Configures how YOUR app is built (most important Android file!).

**Key Sections:**

#### 1. App Identity
```gradle
android {
    namespace "com.ballsortpuzzle"
    
    defaultConfig {
        applicationId "com.ballsortpuzzle"  // Unique app ID (package name)
        versionCode 1                        // Internal version number (increment for updates)
        versionName "1.0.0"                  // User-visible version
    }
}
```

#### 2. Product Flavors (Free vs Premium)
```gradle
flavorDimensions "version"
productFlavors {
    free {
        dimension "version"
        applicationId "com.ballsortpuzzle"          // Free version package
        versionNameSuffix "-free"
        buildConfigField "Boolean", "IS_PREMIUM", "false"
    }
    premium {
        dimension "version"
        applicationId "com.ballsortpuzzle.premium"  // Premium version package
        versionNameSuffix "-premium"
        buildConfigField "Boolean", "IS_PREMIUM", "true"
    }
}
```

#### 3. Build Types (Debug vs Release)
```gradle
buildTypes {
    debug {
        debuggable true         // Allows debugging
        minifyEnabled false     // No code shrinking
    }
    release {
        minifyEnabled true      // Shrink code
        proguardFiles           // Obfuscation rules
        signingConfig           // Sign with release key
    }
}
```

#### 4. Dependencies
```gradle
dependencies {
    implementation "com.facebook.react:react-native:+"
    implementation "androidx.appcompat:appcompat:1.6.1"
    implementation "com.google.android.gms:play-services-ads:22.6.0"
    implementation "com.google.android.gms:play-services-games-v2:20.0.0"
    // ... all your Android libraries
}
```

**What This File Does:**
- Defines app package name
- Sets version numbers
- Configures free vs premium versions
- Manages dependencies
- Sets up signing for releases
- Configures ProGuard (code shrinking)

**Most Important File for:**
- Publishing to Play Store
- App updates
- Feature toggles (free vs premium)

---

### `android/gradle.properties` - Build Properties

**Purpose:** Key-value configuration for Gradle build.

**Important Settings:**
```properties
# Memory allocated to Gradle
org.gradle.jvmargs=-Xmx4096m

# Enable parallel builds (faster)
org.gradle.parallel=true

# Use AndroidX libraries
android.useAndroidX=true

# Convert old support library to AndroidX
android.enableJetifier=true

# React Native architecture
newArchEnabled=false
hermesEnabled=false
```

**What These Do:**

- **org.gradle.jvmargs:** RAM for Gradle (increase if build fails with OutOfMemory)
- **org.gradle.parallel:** Build modules in parallel (faster builds)
- **android.useAndroidX:** Use modern AndroidX libraries
- **android.enableJetifier:** Auto-convert old support libraries
- **newArchEnabled:** Enable React Native's new architecture (experimental)
- **hermesEnabled:** Use Hermes JavaScript engine (faster startup)

**When to Edit:**
- Build fails with OutOfMemory â†’ Increase `-Xmx4096m` to `-Xmx8192m`
- Slow builds â†’ Enable parallel
- Enable Hermes â†’ Set `hermesEnabled=true`

---

### `android/settings.gradle` - Module Configuration

**Purpose:** Defines which modules are part of the project.

**What's Inside:**
```gradle
rootProject.name = 'BallSortPuzzle'
include ':app'                          // Main app module

// React Native modules
include ':react-native-google-signin'
project(':react-native-google-signin').projectDir = new File(
    rootProject.projectDir,
    '../node_modules/@react-native-google-signin/google-signin/android'
)
```

**What This Does:**
- Names the project
- Includes the `:app` module (your app code)
- Links npm packages with native Android code
- Tells Gradle where to find each module

**Auto-managed** by React Native CLI when you install packages with native code.

---

### `android/gradle/wrapper/gradle-wrapper.properties` - Gradle Version

**Purpose:** Specifies which Gradle version to use.

**What's Inside:**
```properties
distributionUrl=https\://services.gradle.org/distributions/gradle-8.4-all.zip
```

**Why Important:**
- Ensures everyone uses same Gradle version
- Auto-downloads Gradle if missing
- Determines which Gradle features are available

**When to Edit:**
- Updating to newer Gradle version
- Following React Native upgrade guide

---

### `android/app/src/main/AndroidManifest.xml` - App Manifest

**Purpose:** THE master configuration file for Android app.

**Critical Sections:**

#### 1. Permissions
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
```

**What Permissions Do:**
- INTERNET: Network access (for ads, Play Games)
- VIBRATE: Haptic feedback
- ACCESS_NETWORK_STATE: Check if online

#### 2. Application Configuration
```xml
<application
    android:name=".MainApplication"
    android:label="@string/app_name"        <!-- App name -->
    android:icon="@mipmap/ic_launcher"      <!-- App icon -->
    android:theme="@style/AppTheme"         <!-- App theme -->
    android:allowBackup="true">
```

#### 3. Main Activity
```xml
<activity
    android:name=".MainActivity"
    android:label="@string/app_name"
    android:configChanges="keyboard|keyboardHidden|orientation|screenSize"
    android:windowSoftInputMode="adjustResize">
    
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
```

**intent-filter:**
- `MAIN` + `LAUNCHER` = Shows in app drawer
- This is the entry point of your app!

#### 4. Metadata (AdMob, Play Games)
```xml
<meta-data
    android:name="com.google.android.gms.ads.APPLICATION_ID"
    android:value="${admobAppId}" />

<meta-data
    android:name="com.google.android.gms.games.APP_ID"
    android:value="@string/google_play_games_app_id" />
```

**What Manifest Controls:**
- App permissions
- App name and icon
- Which activities exist
- Launch behavior
- Deep links
- Google services configuration
- Backup settings

**When to Edit:**
- Adding new permissions
- Changing app name/icon
- Adding activities
- Configuring Google services

---

### `android/app/src/main/java/com/ballsortpuzzle/` - Java/Kotlin Code

#### `MainActivity.java` - Main Activity

**Purpose:** The Android Activity that hosts React Native.

```java
package com.ballsortpuzzle;

import com.facebook.react.ReactActivity;

public class MainActivity extends ReactActivity {
    @Override
    protected String getMainComponentName() {
        return "BallSortPuzzle";  // Must match AppRegistry name in index.js
    }
}
```

**What This Does:**
- Extends ReactActivity (React Native base class)
- Returns component name (links to JavaScript)
- Handles Android lifecycle (onCreate, onResume, etc.)

**Connection to JavaScript:**
```
MainActivity.java
    â†“ (returns "BallSortPuzzle")
index.js
    â†“ (AppRegistry.registerComponent('BallSortPuzzle', ...))
App.js
    â†“
Your React components render!
```

---

#### `MainApplication.java` - Application Class

**Purpose:** Initializes React Native and configures app-level settings.

```java
public class MainApplication extends Application implements ReactApplication {
    
    @Override
    public void onCreate() {
        super.onCreate();
        // Initialize React Native
        // Initialize Firebase
        // Initialize other SDKs
    }
    
    private final ReactNativeHost mReactNativeHost = new ReactNativeHost(this) {
        @Override
        protected List<ReactPackage> getPackages() {
            return Arrays.asList(
                new MainReactPackage(),
                new GoogleSigninPackage(),  // Native modules
                // ... other packages
            );
        }
    };
}
```

**What This Does:**
- Initializes React Native engine
- Registers native modules (bridges JavaScript â†” Java)
- Runs before MainActivity
- Configures JavaScript engine (Hermes/JSC)
- Sets up development tools (Flipper, DevSettings)

**When to Edit:**
- Adding native modules
- Configuring React Native settings
- Initializing SDKs (Firebase, Analytics)

---

### `android/app/src/main/res/` - Resources

#### Folder Structure:
```
res/
â”œâ”€â”€ drawable/          # Images, shapes, gradients
â”œâ”€â”€ layout/            # XML layouts (rarely used with React Native)
â”œâ”€â”€ mipmap-*/          # App icons (different densities)
â”‚   â”œâ”€â”€ mipmap-mdpi/
â”‚   â”œâ”€â”€ mipmap-hdpi/
â”‚   â”œâ”€â”€ mipmap-xhdpi/
â”‚   â”œâ”€â”€ mipmap-xxhdpi/
â”‚   â””â”€â”€ mipmap-xxxhdpi/
â”œâ”€â”€ values/            # Strings, colors, styles
â”‚   â”œâ”€â”€ strings.xml
â”‚   â”œâ”€â”€ colors.xml
â”‚   â””â”€â”€ styles.xml
â””â”€â”€ xml/               # Configuration files
```

#### `values/strings.xml` - String Resources
```xml
<resources>
    <string name="app_name">Ball Sort Puzzle</string>
    <string name="google_play_games_app_id">123456789012</string>
</resources>
```

**Why Use strings.xml:**
- Localization (translate to other languages)
- Referenced in AndroidManifest.xml
- Change app name without recompiling

#### `values/colors.xml` - Color Palette
```xml
<resources>
    <color name="primary">#6200EE</color>
    <color name="primary_dark">#3700B3</color>
    <color name="accent">#03DAC5</color>
</resources>
```

#### `values/styles.xml` - App Themes
```xml
<resources>
    <style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
        <item name="android:statusBarColor">@color/primary_dark</item>
    </style>
    
    <style name="LaunchTheme" parent="AppTheme">
        <!-- Splash screen theme -->
    </style>
</resources>
```

---

### `android/app/build/` - Build Outputs (Generated)

**DO NOT commit to Git!**

```
build/
â”œâ”€â”€ generated/                   # Auto-generated files
â”‚   â”œâ”€â”€ assets/                  
â”‚   â”‚   â””â”€â”€ createBundleFreeDebugJsAndAssets/
â”‚   â”‚       â””â”€â”€ assets/
â”‚   â”‚           â””â”€â”€ index.android.bundle  # JavaScript bundle
â”‚   â””â”€â”€ source/                  # Generated Java code
â”‚
â”œâ”€â”€ intermediates/               # Compiled files (.class, .dex)
â”‚
â””â”€â”€ outputs/
    â””â”€â”€ apk/                     # Final APK files
        â””â”€â”€ free/
            â””â”€â”€ debug/
                â””â”€â”€ app-free-debug.apk  # Installable app
```

**Gets recreated** every time you build!

---

## ğŸ“ web/ Directory - Web Version

### `web/index.html` - HTML Entry Point

**Purpose:** HTML file for web version (react-native-web).

**What's Inside:**
```html
<!DOCTYPE html>
<html>
  <head>
    <title>Ball Sort Puzzle</title>
  </head>
  <body>
    <div id="root"></div>
    <script src="bundle.js"></script>
  </body>
</html>
```

**Used When:**
- Building web version
- Testing in browser
- Deploying to web hosting

---

### `web-server.js` - Development Web Server

**Purpose:** Express server to serve web version locally.

**Usage:**
```bash
node web-server.js
# Opens http://localhost:3000
```

---

## ğŸ“ mdfiles/ - Documentation

### Organization:
```
mdfiles/
â”œâ”€â”€ README.md                      # Index of all docs
â”œâ”€â”€ 2025-11-30/                   # Date-organized guides
â”‚   â””â”€â”€ (all guides from Nov 30)
â””â”€â”€ build-guides/                 # Legacy guides
    â””â”€â”€ (older build fixes)
```

**All your project documentation** organized by date!

---

## Build Scripts (PowerShell)

### `build-android.ps1`
**Purpose:** Automated Android build script.

### `monitor-build.ps1`
**Purpose:** Monitor build progress.

### `RUN-BUILD.ps1`
**Purpose:** Complete build and run workflow.

---

## File Relationships Diagram

```
package.json
    â†“ (defines dependencies)
node_modules/
    â†“ (used by)
index.js
    â†“ (imports)
App.js
    â†“ (imports)
src/screens/*.js
src/components/*.js
src/services/*.js
    â†“ (all bundled by)
Metro Bundler
    â†“ (creates)
index.android.bundle
    â†“ (embedded in)
app-free-debug.apk
    â†“ (installed on)
Android Device/Emulator
```

---

## Key Takeaways

### JavaScript Layer:
- **package.json** â†’ Dependencies
- **App.js** â†’ Your app code
- **src/** â†’ All your custom code
- **Metro** â†’ Bundles everything

### Android Layer:
- **build.gradle** â†’ Build configuration
- **AndroidManifest.xml** â†’ App permissions & structure
- **MainActivity.java** â†’ Entry point
- **res/** â†’ Icons, strings, themes

### Build Process:
```
Your Code (src/)
    â†“
Metro Bundles JavaScript
    â†“
Gradle Compiles Android
    â†“
Packages into APK
    â†“
Installs on Device
```

---

## Most Important Files (Priority Order)

1. âœ… **App.js** - Your main app code
2. âœ… **src/** - All your custom code
3. âœ… **android/app/build.gradle** - App configuration
4. âœ… **AndroidManifest.xml** - Permissions & activities
5. âœ… **package.json** - Dependencies
6. âœ… **MainActivity.java** - Android entry point
7. âš ï¸ **MainApplication.java** - React Native setup
8. âš ï¸ **build.gradle** (project) - Global Android config
9. âš ï¸ **gradle.properties** - Build properties
10. âš ï¸ **babel.config.js** - JavaScript transformation

---

**Focus on files 1-6 for app development. Files 7-10 are usually "set once and forget"!** ğŸ¯
